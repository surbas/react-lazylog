webpackJsonpreact_lazylog([2],{394:function(e,r,t){var n,n;!function(r){e.exports=r()}(function(){return function e(r,t,o){function a(s,l){if(!t[s]){if(!r[s]){var u="function"==typeof n&&n;if(!l&&u)return n(s,!0);if(i)return i(s,!0);var c=new Error("Cannot find module '"+s+"'");throw c.code="MODULE_NOT_FOUND",c}var d=t[s]={exports:{}};r[s][0].call(d.exports,function(e){var t=r[s][1][e];return a(t||e)},d,d.exports,e,r,t,o)}return t[s].exports}for(var i="function"==typeof n&&n,s=0;s<o.length;s++)a(o[s]);return a}({1:[function(e,r,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=e("./spec/reference-implementation/lib/readable-stream"),o=n.ReadableStream,a=e("./spec/reference-implementation/lib/writable-stream"),i=a.WritableStream,s=e("./spec/reference-implementation/lib/byte-length-queuing-strategy"),l=e("./spec/reference-implementation/lib/count-queuing-strategy"),u=e("./spec/reference-implementation/lib/transform-stream").TransformStream;t.ByteLengthQueuingStrategy=s,t.CountQueuingStrategy=l,t.TransformStream=u,t.ReadableStream=o,t.WritableStream=i;var c={ReadableStream:o,WritableStream:i,ByteLengthQueuingStrategy:s,CountQueuingStrategy:l,TransformStream:u};t.default=c,"undefined"!=typeof window&&Object.assign(window,c)},{"./spec/reference-implementation/lib/byte-length-queuing-strategy":3,"./spec/reference-implementation/lib/count-queuing-strategy":4,"./spec/reference-implementation/lib/readable-stream":7,"./spec/reference-implementation/lib/transform-stream":8,"./spec/reference-implementation/lib/writable-stream":9}],2:[function(e,r,t){},{}],3:[function(e,r,t){"use strict";function n(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}var o=function(){function e(e,r){for(var t=0;t<r.length;t++){var n=r[t];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(r,t,n){return t&&e(r.prototype,t),n&&e(r,n),r}}(),a=e("./helpers.js"),i=a.createDataProperty;r.exports=function(){function e(r){var t=r.highWaterMark;n(this,e),i(this,"highWaterMark",t)}return o(e,[{key:"size",value:function(e){return e.byteLength}}]),e}()},{"./helpers.js":5}],4:[function(e,r,t){"use strict";function n(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}var o=function(){function e(e,r){for(var t=0;t<r.length;t++){var n=r[t];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(r,t,n){return t&&e(r.prototype,t),n&&e(r,n),r}}(),a=e("./helpers.js"),i=a.createDataProperty;r.exports=function(){function e(r){var t=r.highWaterMark;n(this,e),i(this,"highWaterMark",t)}return o(e,[{key:"size",value:function(){return 1}}]),e}()},{"./helpers.js":5}],5:[function(e,r,t){"use strict";function n(e){if(Array.isArray(e)){for(var r=0,t=Array(e.length);r<e.length;r++)t[r]=e[r];return t}return Array.from(e)}function o(e,r,t){if("function"!=typeof e)throw new TypeError("Argument is not a function");return Function.prototype.apply.call(e,r,t)}var a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};t.typeIsObject=function(e){return"object"===(void 0===e?"undefined":a(e))&&null!==e||"function"==typeof e},t.createDataProperty=function(e,r,t){Object.defineProperty(e,r,{value:t,writable:!0,enumerable:!0,configurable:!0})},t.createArrayFromList=function(e){return e.slice()},t.ArrayBufferCopy=function(e,r,t,n,o){new Uint8Array(e).set(new Uint8Array(t,n,o),r)},t.CreateIterResultObject=function(e,r){var t={};return Object.defineProperty(t,"value",{value:e,enumerable:!0,writable:!0,configurable:!0}),Object.defineProperty(t,"done",{value:r,enumerable:!0,writable:!0,configurable:!0}),t},t.IsFiniteNonNegativeNumber=function(e){return!(Number.isNaN(e)||e===1/0||e<0)},t.InvokeOrNoop=function(e,r,t){var n=e[r];if(void 0!==n)return o(n,e,t)},t.PromiseInvokeOrNoop=function(e,r,n){try{return Promise.resolve(t.InvokeOrNoop(e,r,n))}catch(e){return Promise.reject(e)}},t.PromiseInvokeOrPerformFallback=function(e,r,t,a,i){var s=void 0;try{s=e[r]}catch(e){return Promise.reject(e)}if(void 0===s)return a.apply(void 0,n(i));try{return Promise.resolve(o(s,e,t))}catch(e){return Promise.reject(e)}},t.PromiseInvokeOrFallbackOrNoop=function(e,r,n,o,a){return t.PromiseInvokeOrPerformFallback(e,r,n,t.PromiseInvokeOrNoop,[e,o,a])},t.SameRealmTransfer=function(e){return e},t.ValidateAndNormalizeHighWaterMark=function(e){if(e=Number(e),Number.isNaN(e)||e<0)throw new RangeError("highWaterMark property of a queuing strategy must be non-negative and non-NaN");return e},t.ValidateAndNormalizeQueuingStrategy=function(e,r){if(void 0!==e&&"function"!=typeof e)throw new TypeError("size property of a queuing strategy must be a function");return r=t.ValidateAndNormalizeHighWaterMark(r),{size:e,highWaterMark:r}}},{}],6:[function(e,r,t){"use strict";var n=e("./helpers.js"),o=n.IsFiniteNonNegativeNumber;t.DequeueValue=function(e){var r=e.shift();return e._totalSize-=r.size,r.value},t.EnqueueValueWithSize=function(e,r,t){if(t=Number(t),!o(t))throw new RangeError("Size must be a finite, non-NaN, non-negative number.");e.push({value:r,size:t}),void 0===e._totalSize&&(e._totalSize=0),e._totalSize+=t},t.GetTotalQueueSize=function(e){return void 0===e._totalSize&&(e._totalSize=0),e._totalSize},t.PeekQueueValue=function(e){return e[0].value}},{"./helpers.js":5}],7:[function(e,r,t){"use strict";function n(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}function o(e){return new er(e)}function a(e){return new $e(e)}function i(e){return!!Ie(e)&&!!Object.prototype.hasOwnProperty.call(e,"_readableStreamController")}function s(e){return e._disturbed}function l(e){return void 0!==e._reader}function u(e,r){var t=a(e),n={closedOrErrored:!1,canceled1:!1,canceled2:!1,reason1:void 0,reason2:void 0};n.promise=new Promise(function(e){n._resolve=e});var o=c();o._reader=t,o._teeState=n,o._cloneForBranch2=r;var i=d();i._stream=e,i._teeState=n;var s=f();s._stream=e,s._teeState=n;var l=Object.create(Object.prototype);Ae(l,"pull",o),Ae(l,"cancel",i);var u=new Ze(l),_=Object.create(Object.prototype);Ae(_,"pull",o),Ae(_,"cancel",s);var h=new Ze(_);return o._branch1=u._readableStreamController,o._branch2=h._readableStreamController,t._closedPromise.catch(function(e){!0!==n.closedOrErrored&&(B(o._branch1,e),B(o._branch2,e),n.closedOrErrored=!0)}),[u,h]}function c(){function e(){var r=e._reader,t=e._branch1,n=e._branch2,o=e._teeState;return E(r).then(function(e){var r=e.value;if(!0===e.done&&!1===o.closedOrErrored&&(!1===o.canceled1&&A(t),!1===o.canceled2&&A(n),o.closedOrErrored=!0),!0!==o.closedOrErrored){var a=r,i=r;!1===o.canceled1&&I(t,a),!1===o.canceled2&&I(n,i)}})}return e}function d(){function e(r){var t=e._stream,n=e._teeState;if(n.canceled1=!0,n.reason1=r,!0===n.canceled2){var o=ze([n.reason1,n.reason2]),a=b(t,o);n._resolve(a)}return n.promise}return e}function f(){function e(r){var t=e._stream,n=e._teeState;if(n.canceled2=!0,n.reason2=r,!0===n.canceled1){var o=ze([n.reason1,n.reason2]),a=b(t,o);n._resolve(a)}return n.promise}return e}function _(e){return new Promise(function(r,t){var n={_resolve:r,_reject:t};e._reader._readIntoRequests.push(n)})}function h(e){return new Promise(function(r,t){var n={_resolve:r,_reject:t};e._reader._readRequests.push(n)})}function b(e,r){return e._disturbed=!0,"closed"===e._state?Promise.resolve(void 0):"errored"===e._state?Promise.reject(e._storedError):(m(e),e._readableStreamController[Ke](r).then(function(){}))}function m(e){e._state="closed";var r=e._reader;if(void 0!==r){if(!0===j(r)){var t=!0,n=!1,o=void 0;try{for(var a,i=r._readRequests[Symbol.iterator]();!(t=(a=i.next()).done);t=!0){(0,a.value._resolve)(je(void 0,!0))}}catch(e){n=!0,o=e}finally{try{!t&&i.return&&i.return()}finally{if(n)throw o}}r._readRequests=[]}ye(r)}}function y(e,r){e._state="errored",e._storedError=r;var t=e._reader;if(void 0!==t){if(!0===j(t)){var n=!0,o=!1,a=void 0;try{for(var i,s=t._readRequests[Symbol.iterator]();!(n=(i=s.next()).done);n=!0){i.value._reject(r)}}catch(e){o=!0,a=e}finally{try{!n&&s.return&&s.return()}finally{if(o)throw a}}t._readRequests=[]}else{var l=!0,u=!1,c=void 0;try{for(var d,f=t._readIntoRequests[Symbol.iterator]();!(l=(d=f.next()).done);l=!0){d.value._reject(r)}}catch(e){u=!0,c=e}finally{try{!l&&f.return&&f.return()}finally{if(u)throw c}}t._readIntoRequests=[]}be(t,r),t._closedPromise.catch(function(){})}}function v(e,r,t){e._reader._readIntoRequests.shift()._resolve(je(r,t))}function p(e,r,t){e._reader._readRequests.shift()._resolve(je(r,t))}function w(e){return e._reader._readIntoRequests.length}function S(e){return e._reader._readRequests.length}function g(e){var r=e._reader;return void 0!==r&&!1!==R(r)}function P(e){var r=e._reader;return void 0!==r&&!1!==j(r)}function R(e){return!!Ie(e)&&!!Object.prototype.hasOwnProperty.call(e,"_readIntoRequests")}function j(e){return!!Ie(e)&&!!Object.prototype.hasOwnProperty.call(e,"_readRequests")}function k(e,r){e._ownerReadableStream=r,r._reader=e,"readable"===r._state?fe(e):"closed"===r._state?he(e):(_e(e,r._storedError),e._closedPromise.catch(function(){}))}function C(e,r){return b(e._ownerReadableStream,r)}function T(e){"readable"===e._ownerReadableStream._state?be(e,new TypeError("Reader was released and can no longer be used to monitor the stream's closedness")):me(e,new TypeError("Reader was released and can no longer be used to monitor the stream's closedness")),e._closedPromise.catch(function(){}),e._ownerReadableStream._reader=void 0,e._ownerReadableStream=void 0}function q(e,r){var t=e._ownerReadableStream;return t._disturbed=!0,"errored"===t._state?Promise.reject(t._storedError):X(t._readableStreamController,r)}function E(e){var r=e._ownerReadableStream;return r._disturbed=!0,"closed"===r._state?Promise.resolve(je(void 0,!0)):"errored"===r._state?Promise.reject(r._storedError):r._readableStreamController[Xe]()}function W(e){return!!Ie(e)&&!!Object.prototype.hasOwnProperty.call(e,"_underlyingSource")}function O(e){if(!1!==z(e)){if(!0===e._pulling)return void(e._pullAgain=!0);e._pulling=!0,Te(e._underlyingSource,"pull",[e]).then(function(){if(e._pulling=!1,!0===e._pullAgain)return e._pullAgain=!1,O(e)},function(r){D(e,r)}).catch(De)}}function z(e){var r=e._controlledReadableStream;return"closed"!==r._state&&"errored"!==r._state&&(!0!==e._closeRequested&&(!1!==e._started&&(!0===l(r)&&S(r)>0||N(e)>0)))}function A(e){var r=e._controlledReadableStream;e._closeRequested=!0,0===e._queue.length&&m(r)}function I(e,r){var t=e._controlledReadableStream;if(!0===l(t)&&S(t)>0)p(t,r,!1);else{var n=1;if(void 0!==e._strategySize)try{n=e._strategySize(r)}catch(r){throw D(e,r),r}try{Fe(e._queue,r,n)}catch(r){throw D(e,r),r}}O(e)}function B(e,r){var t=e._controlledReadableStream;e._queue=[],y(t,r)}function D(e,r){"readable"===e._controlledReadableStream._state&&B(e,r)}function N(e){var r=Me(e._queue);return e._strategyHWM-r}function L(e){return!!Ie(e)&&!!Object.prototype.hasOwnProperty.call(e,"_underlyingByteSource")}function F(e){return!!Ie(e)&&!!Object.prototype.hasOwnProperty.call(e,"_associatedReadableByteStreamController")}function M(e){if(!1!==te(e)){if(!0===e._pulling)return void(e._pullAgain=!0);e._pulling=!0,Te(e._underlyingByteSource,"pull",[e]).then(function(){e._pulling=!1,!0===e._pullAgain&&(e._pullAgain=!1,M(e))},function(r){"readable"===e._controlledReadableStream._state&&ae(e,r)}).catch(De)}}function Q(e){J(e),e._pendingPullIntos=[]}function V(e,r){var t=!1;"closed"===e._state&&(t=!0);var n=x(r);"default"===r.readerType?p(e,n,t):v(e,n,t)}function x(e){var r=e.bytesFilled,t=e.elementSize;return new e.ctor(e.buffer,e.byteOffset,r/t)}function Y(e,r,t,n){e._queue.push({buffer:r,byteOffset:t,byteLength:n}),e._totalQueuedBytes+=n}function H(e,r){var t=r.elementSize,n=r.bytesFilled-r.bytesFilled%t,o=Math.min(e._totalQueuedBytes,r.byteLength-r.bytesFilled),a=r.bytesFilled+o,i=a-a%t,s=o,l=!1;i>n&&(s=i-r.bytesFilled,l=!0);for(var u=e._queue;s>0;){var c=u[0],d=Math.min(s,c.byteLength),f=r.byteOffset+r.bytesFilled;Re(r.buffer,f,c.buffer,c.byteOffset,d),c.byteLength===d?u.shift():(c.byteOffset+=d,c.byteLength-=d),e._totalQueuedBytes-=d,U(e,d,r),s-=d}return l}function U(e,r,t){J(e),t.bytesFilled+=r}function G(e){0===e._totalQueuedBytes&&!0===e._closeRequested?m(e._controlledReadableStream):M(e)}function J(e){void 0!==e._byobRequest&&(e._byobRequest._associatedReadableByteStreamController=void 0,e._byobRequest._view=void 0,e._byobRequest=void 0)}function K(e){for(;e._pendingPullIntos.length>0;){if(0===e._totalQueuedBytes)return;var r=e._pendingPullIntos[0];!0===H(e,r)&&(re(e),V(e._controlledReadableStream,r))}}function X(e,r){var t=e._controlledReadableStream,n=1;r.constructor!==DataView&&(n=r.constructor.BYTES_PER_ELEMENT);var o=r.constructor,a={buffer:r.buffer,byteOffset:r.byteOffset,byteLength:r.byteLength,bytesFilled:0,elementSize:n,ctor:o,readerType:"byob"};if(e._pendingPullIntos.length>0)return a.buffer=qe(a.buffer),e._pendingPullIntos.push(a),_(t);if("closed"===t._state){var i=new r.constructor(r.buffer,r.byteOffset,0);return Promise.resolve(je(i,!0))}if(e._totalQueuedBytes>0){if(!0===H(e,a)){var s=x(a);return G(e),Promise.resolve(je(s,!1))}if(!0===e._closeRequested){var l=new TypeError("Insufficient bytes to fill elements in the given buffer");return ae(e,l),Promise.reject(l)}}a.buffer=qe(a.buffer),e._pendingPullIntos.push(a);var u=_(t);return M(e),u}function Z(e,r){r.buffer=qe(r.buffer);for(var t=e._controlledReadableStream;w(t)>0;){V(t,re(e))}}function $(e,r,t){if(t.bytesFilled+r>t.byteLength)throw new RangeError("bytesWritten out of range");if(U(e,r,t),!(t.bytesFilled<t.elementSize)){re(e);var n=t.bytesFilled%t.elementSize;if(n>0){var o=t.byteOffset+t.bytesFilled,a=t.buffer.slice(o-n,o);Y(e,a,0,a.byteLength)}t.buffer=qe(t.buffer),t.bytesFilled-=n,V(e._controlledReadableStream,t),K(e)}}function ee(e,r){var t=e._pendingPullIntos[0];if("closed"===e._controlledReadableStream._state){if(0!==r)throw new TypeError("bytesWritten must be 0 when calling respond() on a closed stream");Z(e,t)}else $(e,r,t)}function re(e){var r=e._pendingPullIntos.shift();return J(e),r}function te(e){var r=e._controlledReadableStream;return"readable"===r._state&&!0!==e._closeRequested&&!1!==e._started&&(!!(P(r)&&S(r)>0)||!!(g(r)&&w(r)>0)||ie(e)>0)}function ne(e){var r=e._controlledReadableStream;if(e._totalQueuedBytes>0)return void(e._closeRequested=!0);if(e._pendingPullIntos.length>0){if(e._pendingPullIntos[0].bytesFilled>0){var t=new TypeError("Insufficient bytes to fill elements in the given buffer");throw ae(e,t),t}}m(r)}function oe(e,r){var t=e._controlledReadableStream,n=r.buffer,o=r.byteOffset,a=r.byteLength,i=qe(n);if(!0===P(t))if(0===S(t))Y(e,i,o,a);else{var s=new Uint8Array(i,o,a);p(t,s,!1)}else!0===g(t)?(Y(e,i,o,a),K(e)):Y(e,i,o,a)}function ae(e,r){var t=e._controlledReadableStream;Q(e),e._queue=[],y(t,r)}function ie(e){return e._strategyHWM-e._totalQueuedBytes}function se(e,r){if(r=Number(r),!1===ke(r))throw new RangeError("bytesWritten must be a finite");ee(e,r)}function le(e,r){var t=e._pendingPullIntos[0];if(t.byteOffset+t.bytesFilled!==r.byteOffset)throw new RangeError("The region specified by view does not match byobRequest");if(t.byteLength!==r.byteLength)throw new RangeError("The buffer of view has different capacity than byobRequest");t.buffer=r.buffer,ee(e,r.byteLength)}function ue(e){return new TypeError("ReadableStream.prototype."+e+" can only be used on a ReadableStream")}function ce(e){return new TypeError("Cannot "+e+" a stream using a released reader")}function de(e){return new TypeError("ReadableStreamDefaultReader.prototype."+e+" can only be used on a ReadableStreamDefaultReader")}function fe(e){e._closedPromise=new Promise(function(r,t){e._closedPromise_resolve=r,e._closedPromise_reject=t})}function _e(e,r){e._closedPromise=Promise.reject(r),e._closedPromise_resolve=void 0,e._closedPromise_reject=void 0}function he(e){e._closedPromise=Promise.resolve(void 0),e._closedPromise_resolve=void 0,e._closedPromise_reject=void 0}function be(e,r){e._closedPromise_reject(r),e._closedPromise_resolve=void 0,e._closedPromise_reject=void 0}function me(e,r){e._closedPromise=Promise.reject(r)}function ye(e){e._closedPromise_resolve(void 0),e._closedPromise_resolve=void 0,e._closedPromise_reject=void 0}function ve(e){return new TypeError("ReadableStreamBYOBReader.prototype."+e+" can only be used on a ReadableStreamBYOBReader")}function pe(e){return new TypeError("ReadableStreamDefaultController.prototype."+e+" can only be used on a ReadableStreamDefaultController")}function we(e){return new TypeError("ReadableStreamBYOBRequest.prototype."+e+" can only be used on a ReadableStreamBYOBRequest")}function Se(e){return new TypeError("ReadableByteStreamController.prototype."+e+" can only be used on a ReadableByteStreamController")}var ge=function(){function e(e,r){for(var t=0;t<r.length;t++){var n=r[t];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(r,t,n){return t&&e(r.prototype,t),n&&e(r,n),r}}(),Pe=e("./helpers.js"),Re=Pe.ArrayBufferCopy,je=Pe.CreateIterResultObject,ke=Pe.IsFiniteNonNegativeNumber,Ce=Pe.InvokeOrNoop,Te=Pe.PromiseInvokeOrNoop,qe=Pe.SameRealmTransfer,Ee=Pe.ValidateAndNormalizeQueuingStrategy,We=Pe.ValidateAndNormalizeHighWaterMark,Oe=e("./helpers.js"),ze=Oe.createArrayFromList,Ae=Oe.createDataProperty,Ie=Oe.typeIsObject,Be=e("./utils.js"),De=Be.rethrowAssertionErrorRejection,Ne=e("./queue-with-sizes.js"),Le=Ne.DequeueValue,Fe=Ne.EnqueueValueWithSize,Me=Ne.GetTotalQueueSize,Qe=e("./writable-stream.js"),Ve=Qe.AcquireWritableStreamDefaultWriter,xe=Qe.IsWritableStream,Ye=Qe.IsWritableStreamLocked,He=Qe.WritableStreamAbort,Ue=Qe.WritableStreamDefaultWriterCloseWithErrorPropagation,Ge=Qe.WritableStreamDefaultWriterRelease,Je=Qe.WritableStreamDefaultWriterWrite,Ke=Symbol("[[Cancel]]"),Xe=Symbol("[[Pull]]"),Ze=function(){function e(){var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},o=t.size,a=t.highWaterMark;n(this,e),this._state="readable",this._reader=void 0,this._storedError=void 0,this._disturbed=!1,this._readableStreamController=void 0;var i=r.type;if("bytes"===String(i))void 0===a&&(a=0),this._readableStreamController=new nr(this,r,a);else{if(void 0!==i)throw new RangeError("Invalid type is specified");void 0===a&&(a=1),this._readableStreamController=new rr(this,r,o,a)}}return ge(e,[{key:"cancel",value:function(e){return!1===i(this)?Promise.reject(ue("cancel")):!0===l(this)?Promise.reject(new TypeError("Cannot cancel a stream that already has a reader")):b(this,e)}},{key:"getReader",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=e.mode;if(!1===i(this))throw ue("getReader");if("byob"===r){if(!1===L(this._readableStreamController))throw new TypeError("Cannot get a ReadableStreamBYOBReader for a stream not constructed with a byte source");return o(this)}if(void 0===r)return a(this);throw new RangeError("Invalid mode is specified")}},{key:"pipeThrough",value:function(e,r){var t=e.writable,n=e.readable;return this.pipeTo(t,r),n}},{key:"pipeTo",value:function(e){var r=this,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.preventClose,o=t.preventAbort,s=t.preventCancel;if(!1===i(this))return Promise.reject(ue("pipeTo"));if(!1===xe(e))return Promise.reject(new TypeError("ReadableStream.prototype.pipeTo's first argument must be a WritableStream"));if(n=Boolean(n),o=Boolean(o),s=Boolean(s),!0===l(this))return Promise.reject(new TypeError("ReadableStream.prototype.pipeTo cannot be used on a locked ReadableStream"));if(!0===Ye(e))return Promise.reject(new TypeError("ReadableStream.prototype.pipeTo cannot be used on a locked WritableStream"));var u=a(this),c=Ve(e),d=!1,f=Promise.resolve();return new Promise(function(t,a){function i(){return f=Promise.resolve(),!0===d?Promise.resolve():c._readyPromise.then(function(){return E(u).then(function(e){var r=e.value;if(!0!==e.done)return f=Je(c,r)})}).then(i)}function l(e,r,t){"errored"===e._state?t(e._storedError):r.catch(t).catch(De)}function _(){return f.catch(function(){})}function h(e,r,t){!0!==d&&(d=!0,_().then(function(){return e().then(function(){return y(r,t)},function(e){return y(!0,e)})}).catch(De))}function m(e,r){!0!==d&&(d=!0,_().then(function(){y(e,r)}).catch(De))}function y(e,r){Ge(c),T(u),e?a(r):t(void 0)}l(r,u._closedPromise,function(r){!1===o?h(function(){return He(e,r)},!0,r):m(!0,r)}),l(e,c._closedPromise,function(e){!1===s?h(function(){return b(r,e)},!0,e):m(!0,e)}),function(e,r,t){"closed"===e._state?t():r.then(t).catch(De)}(r,u._closedPromise,function(){!1===n?h(function(){return Ue(c)}):m()}),"closing"!==e._state&&"closed"!==e._state||function(){var e=new TypeError("the destination writable stream closed before all data could be piped to it");!1===s?h(function(){return b(r,e)},!0,e):m(!0,e)}(),i().catch(function(e){f=Promise.resolve(),De(e)})})}},{key:"tee",value:function(){if(!1===i(this))throw ue("tee");var e=u(this,!1);return ze(e)}},{key:"locked",get:function(){if(!1===i(this))throw ue("locked");return l(this)}}]),e}();r.exports={ReadableStream:Ze,IsReadableStreamDisturbed:s,ReadableStreamDefaultControllerClose:A,ReadableStreamDefaultControllerEnqueue:I,ReadableStreamDefaultControllerError:B,ReadableStreamDefaultControllerGetDesiredSize:N};var $e=function(){function e(r){if(n(this,e),!1===i(r))throw new TypeError("ReadableStreamDefaultReader can only be constructed with a ReadableStream instance");if(!0===l(r))throw new TypeError("This stream has already been locked for exclusive reading by another reader");k(this,r),this._readRequests=[]}return ge(e,[{key:"cancel",value:function(e){return!1===j(this)?Promise.reject(de("cancel")):void 0===this._ownerReadableStream?Promise.reject(ce("cancel")):C(this,e)}},{key:"read",value:function(){return!1===j(this)?Promise.reject(de("read")):void 0===this._ownerReadableStream?Promise.reject(ce("read from")):E(this)}},{key:"releaseLock",value:function(){if(!1===j(this))throw de("releaseLock");if(void 0!==this._ownerReadableStream){if(this._readRequests.length>0)throw new TypeError("Tried to release a reader lock when that reader has pending read() calls un-settled");T(this)}}},{key:"closed",get:function(){return!1===j(this)?Promise.reject(de("closed")):this._closedPromise}}]),e}(),er=function(){function e(r){if(n(this,e),!i(r))throw new TypeError("ReadableStreamBYOBReader can only be constructed with a ReadableStream instance given a byte source");if(l(r))throw new TypeError("This stream has already been locked for exclusive reading by another reader");k(this,r),this._readIntoRequests=[]}return ge(e,[{key:"cancel",value:function(e){return R(this)?void 0===this._ownerReadableStream?Promise.reject(ce("cancel")):C(this,e):Promise.reject(ve("cancel"))}},{key:"read",value:function(e){return R(this)?void 0===this._ownerReadableStream?Promise.reject(ce("read from")):ArrayBuffer.isView(e)?0===e.byteLength?Promise.reject(new TypeError("view must have non-zero byteLength")):q(this,e):Promise.reject(new TypeError("view must be an array buffer view")):Promise.reject(ve("read"))}},{key:"releaseLock",value:function(){if(!R(this))throw ve("releaseLock");if(void 0!==this._ownerReadableStream){if(this._readIntoRequests.length>0)throw new TypeError("Tried to release a reader lock when that reader has pending read() calls un-settled");T(this)}}},{key:"closed",get:function(){return R(this)?this._closedPromise:Promise.reject(ve("closed"))}}]),e}(),rr=function(){function e(r,t,o,a){if(n(this,e),!1===i(r))throw new TypeError("ReadableStreamDefaultController can only be constructed with a ReadableStream instance");if(void 0!==r._readableStreamController)throw new TypeError("ReadableStreamDefaultController instances can only be created by the ReadableStream constructor");this._controlledReadableStream=r,this._underlyingSource=t,this._queue=[],this._started=!1,this._closeRequested=!1,this._pullAgain=!1,this._pulling=!1;var s=Ee(o,a);this._strategySize=s.size,this._strategyHWM=s.highWaterMark;var l=this,u=Ce(t,"start",[this]);Promise.resolve(u).then(function(){l._started=!0,O(l)},function(e){D(l,e)}).catch(De)}return ge(e,[{key:"close",value:function(){if(!1===W(this))throw pe("close");if(!0===this._closeRequested)throw new TypeError("The stream has already been closed; do not close it again!");var e=this._controlledReadableStream._state;if("readable"!==e)throw new TypeError("The stream (in "+e+" state) is not in the readable state and cannot be closed");A(this)}},{key:"enqueue",value:function(e){if(!1===W(this))throw pe("enqueue");if(!0===this._closeRequested)throw new TypeError("stream is closed or draining");var r=this._controlledReadableStream._state;if("readable"!==r)throw new TypeError("The stream (in "+r+" state) is not in the readable state and cannot be enqueued to");return I(this,e)}},{key:"error",value:function(e){if(!1===W(this))throw pe("error");var r=this._controlledReadableStream;if("readable"!==r._state)throw new TypeError("The stream is "+r._state+" and so cannot be errored");B(this,e)}},{key:Ke,value:function(e){return this._queue=[],Te(this._underlyingSource,"cancel",[e])}},{key:Xe,value:function(){var e=this._controlledReadableStream;if(this._queue.length>0){var r=Le(this._queue);return!0===this._closeRequested&&0===this._queue.length?m(e):O(this),Promise.resolve(je(r,!1))}var t=h(e);return O(this),t}},{key:"desiredSize",get:function(){if(!1===W(this))throw pe("desiredSize");return N(this)}}]),e}(),tr=function(){function e(r,t){n(this,e),this._associatedReadableByteStreamController=r,this._view=t}return ge(e,[{key:"respond",value:function(e){if(!1===F(this))throw we("respond");if(void 0===this._associatedReadableByteStreamController)throw new TypeError("This BYOB request has been invalidated");se(this._associatedReadableByteStreamController,e)}},{key:"respondWithNewView",value:function(e){if(!1===F(this))throw we("respond");if(void 0===this._associatedReadableByteStreamController)throw new TypeError("This BYOB request has been invalidated");if(!ArrayBuffer.isView(e))throw new TypeError("You can only respond with array buffer views");le(this._associatedReadableByteStreamController,e)}},{key:"view",get:function(){return this._view}}]),e}(),nr=function(){function e(r,t,o){if(n(this,e),!1===i(r))throw new TypeError("ReadableByteStreamController can only be constructed with a ReadableStream instance given a byte source");if(void 0!==r._readableStreamController)throw new TypeError("ReadableByteStreamController instances can only be created by the ReadableStream constructor given a byte source");this._controlledReadableStream=r,this._underlyingByteSource=t,this._pullAgain=!1,this._pulling=!1,Q(this),this._queue=[],this._totalQueuedBytes=0,this._closeRequested=!1,this._started=!1,this._strategyHWM=We(o);var a=t.autoAllocateChunkSize;if(void 0!==a&&(!1===Number.isInteger(a)||a<=0))throw new RangeError("autoAllocateChunkSize must be a positive integer");this._autoAllocateChunkSize=a,this._pendingPullIntos=[];var s=this,l=Ce(t,"start",[this]);Promise.resolve(l).then(function(){s._started=!0,M(s)},function(e){"readable"===r._state&&ae(s,e)}).catch(De)}return ge(e,[{key:"close",value:function(){if(!1===L(this))throw Se("close");if(!0===this._closeRequested)throw new TypeError("The stream has already been closed; do not close it again!");var e=this._controlledReadableStream._state;if("readable"!==e)throw new TypeError("The stream (in "+e+" state) is not in the readable state and cannot be closed");ne(this)}},{key:"enqueue",value:function(e){if(!1===L(this))throw Se("enqueue");if(!0===this._closeRequested)throw new TypeError("stream is closed or draining");var r=this._controlledReadableStream._state;if("readable"!==r)throw new TypeError("The stream (in "+r+" state) is not in the readable state and cannot be enqueued to");if(!ArrayBuffer.isView(e))throw new TypeError("You can only enqueue array buffer views when using a ReadableByteStreamController");oe(this,e)}},{key:"error",value:function(e){if(!1===L(this))throw Se("error");var r=this._controlledReadableStream;if("readable"!==r._state)throw new TypeError("The stream is "+r._state+" and so cannot be errored");ae(this,e)}},{key:Ke,value:function(e){if(this._pendingPullIntos.length>0){this._pendingPullIntos[0].bytesFilled=0}return this._queue=[],this._totalQueuedBytes=0,Te(this._underlyingByteSource,"cancel",[e])}},{key:Xe,value:function(){var e=this._controlledReadableStream;if(0===S(e)){if(this._totalQueuedBytes>0){var r=this._queue.shift();this._totalQueuedBytes-=r.byteLength,G(this);var t=void 0;try{t=new Uint8Array(r.buffer,r.byteOffset,r.byteLength)}catch(e){return Promise.reject(e)}return Promise.resolve(je(t,!1))}var n=this._autoAllocateChunkSize;if(void 0!==n){var o=void 0;try{o=new ArrayBuffer(n)}catch(e){return Promise.reject(e)}var a={buffer:o,byteOffset:0,byteLength:n,bytesFilled:0,elementSize:1,ctor:Uint8Array,readerType:"default"};this._pendingPullIntos.push(a)}}var i=h(e);return M(this),i}},{key:"byobRequest",get:function(){if(!1===L(this))throw Se("byobRequest");if(void 0===this._byobRequest&&this._pendingPullIntos.length>0){var e=this._pendingPullIntos[0],r=new Uint8Array(e.buffer,e.byteOffset+e.bytesFilled,e.byteLength-e.bytesFilled);this._byobRequest=new tr(this,r)}return this._byobRequest}},{key:"desiredSize",get:function(){if(!1===L(this))throw Se("desiredSize");return ie(this)}}]),e}()},{"./helpers.js":5,"./queue-with-sizes.js":6,"./utils.js":2,"./writable-stream.js":9}],8:[function(e,r,t){"use strict";function n(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}function o(e){if(!0===e._errored)throw new TypeError("TransformStream is already errored");if(!0===e._readableClosed)throw new TypeError("Readable side is already closed");s(e)}function a(e,r){if(!0===e._errored)throw new TypeError("TransformStream is already errored");if(!0===e._readableClosed)throw new TypeError("Readable side is already closed");var t=e._readableController;try{C(t,r)}catch(r){throw e._readableClosed=!0,l(e,r),e._storedError}!0==q(t)<=0&&!1===e._backpressure&&d(e,!0)}function i(e,r){if(!0===e._errored)throw new TypeError("TransformStream is already errored");u(e,r)}function s(e){try{k(e._readableController)}catch(e){}e._readableClosed=!0}function l(e,r){!1===e._errored&&u(e,r)}function u(e,r){e._errored=!0,e._storedError=r,!1===e._writableDone&&O(e._writableController,r),!1===e._readableClosed&&T(e._readableController,r)}function c(e){return!1===e._backpressure?Promise.resolve():e._backpressureChangePromise}function d(e,r){void 0!==e._backpressureChangePromise&&e._backpressureChangePromise_resolve(r),e._backpressureChangePromise=new Promise(function(r){e._backpressureChangePromise_resolve=r}),e._backpressureChangePromise.then(function(e){}),e._backpressure=r}function f(e,r){return a(r._controlledTransformStream,e),Promise.resolve()}function _(e,r){e._transforming=!0;var t=e._transformer,n=e._transformStreamController;return S(t,"transform",[r,n],f,[r,n]).then(function(){return e._transforming=!1,c(e)},function(r){return l(e,r),Promise.reject(r)})}function h(e){return!!P(e)&&!!Object.prototype.hasOwnProperty.call(e,"_controlledTransformStream")}function b(e){return!!P(e)&&!!Object.prototype.hasOwnProperty.call(e,"_transformStreamController")}function m(e){return new TypeError("TransformStreamDefaultController.prototype."+e+" can only be used on a TransformStreamDefaultController")}function y(e){return new TypeError("TransformStream.prototype."+e+" can only be used on a TransformStream")}var v=function(){function e(e,r){for(var t=0;t<r.length;t++){var n=r[t];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(r,t,n){return t&&e(r.prototype,t),n&&e(r,n),r}}(),p=e("./helpers.js"),w=p.InvokeOrNoop,S=p.PromiseInvokeOrPerformFallback,g=p.PromiseInvokeOrNoop,P=p.typeIsObject,R=e("./readable-stream.js"),j=R.ReadableStream,k=R.ReadableStreamDefaultControllerClose,C=R.ReadableStreamDefaultControllerEnqueue,T=R.ReadableStreamDefaultControllerError,q=R.ReadableStreamDefaultControllerGetDesiredSize,E=e("./writable-stream.js"),W=E.WritableStream,O=E.WritableStreamDefaultControllerError,z=function(){function e(r,t){n(this,e),this._transformStream=r,this._startPromise=t}return v(e,[{key:"start",value:function(e){var r=this._transformStream;return r._writableController=e,this._startPromise.then(function(){return c(r)})}},{key:"write",value:function(e){return _(this._transformStream,e)}},{key:"abort",value:function(){var e=this._transformStream;e._writableDone=!0,u(e,new TypeError("Writable side aborted"))}},{key:"close",value:function(){var e=this._transformStream;return e._writableDone=!0,g(e._transformer,"flush",[e._transformStreamController]).then(function(){return!0===e._errored?Promise.reject(e._storedError):(!1===e._readableClosed&&s(e),Promise.resolve())}).catch(function(r){return l(e,r),Promise.reject(e._storedError)})}}]),e}(),A=function(){function e(r,t){n(this,e),this._transformStream=r,this._startPromise=t}return v(e,[{key:"start",value:function(e){var r=this._transformStream;return r._readableController=e,this._startPromise.then(function(){return!0===r._backpressure?Promise.resolve():r._backpressureChangePromise})}},{key:"pull",value:function(){var e=this._transformStream;return d(e,!1),e._backpressureChangePromise}},{key:"cancel",value:function(){var e=this._transformStream;e._readableClosed=!0,u(e,new TypeError("Readable side canceled"))}}]),e}(),I=function(){function e(r){if(n(this,e),!1===b(r))throw new TypeError("TransformStreamDefaultController can only be constructed with a TransformStream instance");if(void 0!==r._transformStreamController)throw new TypeError("TransformStreamDefaultController instances can only be created by the TransformStream constructor");this._controlledTransformStream=r}return v(e,[{key:"enqueue",value:function(e){if(!1===h(this))throw m("enqueue");a(this._controlledTransformStream,e)}},{key:"close",value:function(){if(!1===h(this))throw m("close");o(this._controlledTransformStream)}},{key:"error",value:function(e){if(!1===h(this))throw m("error");i(this._controlledTransformStream,e)}},{key:"desiredSize",get:function(){if(!1===h(this))throw m("desiredSize");var e=this._controlledTransformStream,r=e._readableController;return q(r)}}]),e}(),B=function(){function e(){var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};n(this,e),this._transformer=r;var t=r.readableStrategy,o=r.writableStrategy;this._transforming=!1,this._errored=!1,this._storedError=void 0,this._writableController=void 0,this._readableController=void 0,this._transformStreamController=void 0,this._writableDone=!1,this._readableClosed=!1,this._backpressure=void 0,this._backpressureChangePromise=void 0,this._backpressureChangePromise_resolve=void 0,this._transformStreamController=new I(this);var a=void 0,i=new Promise(function(e){a=e}),s=new A(this,i);this._readable=new j(s,t);var l=new z(this,i);this._writable=new W(l,o),d(this,q(this._readableController)<=0);var u=this,c=w(r,"start",[u._transformStreamController]);a(c),i.catch(function(e){!1===u._errored&&(u._errored=!0,u._storedError=e)})}return v(e,[{key:"readable",get:function(){if(!1===b(this))throw y("readable");return this._readable}},{key:"writable",get:function(){if(!1===b(this))throw y("writable");return this._writable}}]),e}();r.exports={TransformStream:B}},{"./helpers.js":5,"./readable-stream.js":7,"./writable-stream.js":9}],9:[function(e,r,t){"use strict";function n(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}function o(e){return new se(e)}function a(e){return!!Z(e)&&!!Object.prototype.hasOwnProperty.call(e,"_writableStreamController")}function i(e){return void 0!==e._writer}function s(e,r){var t=e._state;if("closed"===t)return Promise.resolve(void 0);if("errored"===t)return Promise.reject(e._storedError);var n=new TypeError("Aborted");u(e,n);var o=e._writableStreamController;if(!0===o._writing||!0===o._inClose){var a=new Promise(function(r,t){var n={_resolve:r,_reject:t};e._pendingAbortRequest=n});return!0===o._writing?a.then(function(){return w(e._writableStreamController,r)}):a}return w(e._writableStreamController,r)}function l(e){return new Promise(function(r,t){var n={_resolve:r,_reject:t};e._writeRequests.push(n)})}function u(e,r){var t=e._state;e._state="errored",e._storedError=r;var n=e._writableStreamController;(void 0===n||!1===n._writing&&!1===n._inClose)&&d(e);var o=e._writer;void 0!==o&&("writable"===t&&!0===q(e._writableStreamController)?Q(o,r):x(o,r),o._readyPromise.catch(function(){}))}function c(e){"closing"===e._state?(L(e._writer),e._state="closed"):(D(e._writer,e._storedError),e._writer._closedPromise.catch(function(){})),void 0!==e._pendingAbortRequest&&(e._pendingAbortRequest._resolve(),e._pendingAbortRequest=void 0)}function d(e){var r=e._storedError,t=!0,n=!1,o=void 0;try{for(var a,i=e._writeRequests[Symbol.iterator]();!(t=(a=i.next()).done);t=!0){a.value._reject(r)}}catch(e){n=!0,o=e}finally{try{!t&&i.return&&i.return()}finally{if(n)throw o}}e._writeRequests=[],void 0!==e._pendingCloseRequest&&(e._pendingCloseRequest._reject(r),e._pendingCloseRequest=void 0);var s=e._writer;void 0!==s&&(D(s,r),s._closedPromise.catch(function(){}))}function f(e,r){var t=e._writer;void 0!==t&&(!0===r?V(t):Y(t))}function _(e){return!!Z(e)&&!!Object.prototype.hasOwnProperty.call(e,"_ownerWritableStream")}function h(e,r){return s(e._ownerWritableStream,r)}function b(e){var r=e._ownerWritableStream,t=r._state;if("closed"===t||"errored"===t)return Promise.reject(new TypeError("The stream (in "+t+" state) is not in the writable state and cannot be closed"));var n=new Promise(function(e,t){var n={_resolve:e,_reject:t};r._pendingCloseRequest=n});return!0===q(r._writableStreamController)&&Y(e),r._state="closing",S(r._writableStreamController),n}function m(e){var r=e._ownerWritableStream,t=r._state;return"closing"===t||"closed"===t?Promise.resolve():"errored"===t?Promise.reject(r._storedError):b(e)}function y(e){var r=e._ownerWritableStream,t=r._state;return"errored"===t?null:"closed"===t?0:g(r._writableStreamController)}function v(e){var r=e._ownerWritableStream,t=new TypeError("Writer was released and can no longer be used to monitor the stream's closedness"),n=r._state;"writable"===n||"closing"===n||void 0!==r._pendingAbortRequest?D(e,t):N(e,t),e._closedPromise.catch(function(){}),"writable"===n&&!0===q(r._writableStreamController)?Q(e,t):x(e,t),e._readyPromise.catch(function(){}),r._writer=void 0,e._ownerWritableStream=void 0}function p(e,r){var t=e._ownerWritableStream,n=t._state;if("closed"===n||"errored"===n)return Promise.reject(new TypeError("The stream (in "+n+" state) is not in the writable state and cannot be written to"));var o=l(t);return P(t._writableStreamController,r),o}function w(e,r){return e._queue=[],K(e._underlyingSink,"abort",[r],"close",[e]).then(function(){})}function S(e){ne(e._queue,"close",0),j(e)}function g(e){var r=oe(e._queue);return e._strategyHWM-r}function P(e,r){var t=e._controlledWritableStream,n=1;if(void 0!==e._strategySize)try{n=e._strategySize(r)}catch(r){return void k(e,r)}var o={chunk:r},a=q(e);try{ne(e._queue,o,n)}catch(r){return void k(e,r)}if("writable"===t._state){var i=q(e);a!==i&&f(t,i)}j(e)}function R(e){return!!Z(e)&&!!Object.prototype.hasOwnProperty.call(e,"_underlyingSink")}function j(e){if("closed"!==e._controlledWritableStream._state&&"errored"!==e._controlledWritableStream._state&&!1!==e._started&&!0!==e._writing&&0!==e._queue.length){var r=ae(e._queue);"close"===r?C(e):T(e,r.chunk)}}function k(e,r){"writable"!==e._controlledWritableStream._state&&"closing"!==e._controlledWritableStream._state||E(e,r)}function C(e){var r=e._controlledWritableStream;te(e._queue),e._inClose=!0,J(e._underlyingSink,"close",[e]).then(function(){e._inClose=!1,"closing"!==r._state&&"errored"!==r._state||(r._pendingCloseRequest._resolve(void 0),r._pendingCloseRequest=void 0,c(r))},function(t){e._inClose=!1,r._pendingCloseRequest._reject(t),r._pendingCloseRequest=void 0,void 0!==r._pendingAbortRequest&&(r._pendingAbortRequest._reject(t),r._pendingAbortRequest=void 0),k(e,t)}).catch(ee)}function T(e,r){e._writing=!0;var t=e._controlledWritableStream;t._pendingWriteRequest=t._writeRequests.shift(),J(e._underlyingSink,"write",[r,e]).then(function(){var r=t._state;if(e._writing=!1,t._pendingWriteRequest._resolve(void 0),t._pendingWriteRequest=void 0,"errored"===r)return d(t),void(void 0!==t._pendingAbortRequest&&(t._pendingAbortRequest._resolve(),t._pendingAbortRequest=void 0));var n=q(e);if(te(e._queue),"closing"!==r){var o=q(e);n!==o&&f(e._controlledWritableStream,o)}j(e)},function(r){e._writing=!1,t._pendingWriteRequest._reject(r),t._pendingWriteRequest=void 0,"errored"===t._state&&(t._storedError=r,d(t)),void 0!==t._pendingAbortRequest&&(t._pendingAbortRequest._reject(r),t._pendingAbortRequest=void 0),k(e,r)}).catch(ee)}function q(e){return g(e)<=0}function E(e,r){u(e._controlledWritableStream,r),e._queue=[]}function W(e){return new TypeError("WritableStream.prototype."+e+" can only be used on a WritableStream")}function O(e){return new TypeError("WritableStreamDefaultWriter.prototype."+e+" can only be used on a WritableStreamDefaultWriter")}function z(e){return new TypeError("Cannot "+e+" a stream using a released writer")}function A(e){e._closedPromise=new Promise(function(r,t){e._closedPromise_resolve=r,e._closedPromise_reject=t})}function I(e,r){e._closedPromise=Promise.reject(r),e._closedPromise_resolve=void 0,e._closedPromise_reject=void 0}function B(e){e._closedPromise=Promise.resolve(void 0),e._closedPromise_resolve=void 0,e._closedPromise_reject=void 0}function D(e,r){e._closedPromise_reject(r),e._closedPromise_resolve=void 0,e._closedPromise_reject=void 0}function N(e,r){e._closedPromise=Promise.reject(r)}function L(e){e._closedPromise_resolve(void 0),e._closedPromise_resolve=void 0,e._closedPromise_reject=void 0}function F(e){e._readyPromise=new Promise(function(r,t){e._readyPromise_resolve=r,e._readyPromise_reject=t})}function M(e){e._readyPromise=Promise.resolve(void 0),e._readyPromise_resolve=void 0,e._readyPromise_reject=void 0}function Q(e,r){e._readyPromise_reject(r),e._readyPromise_resolve=void 0,e._readyPromise_reject=void 0}function V(e){e._readyPromise=new Promise(function(r,t){e._readyPromise_resolve=r,e._readyPromise_reject=t})}function x(e,r){e._readyPromise=Promise.reject(r)}function Y(e){e._readyPromise_resolve(void 0),e._readyPromise_resolve=void 0,e._readyPromise_reject=void 0}var H=function(){function e(e,r){for(var t=0;t<r.length;t++){var n=r[t];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(r,t,n){return t&&e(r.prototype,t),n&&e(r,n),r}}(),U=e("./helpers.js"),G=U.InvokeOrNoop,J=U.PromiseInvokeOrNoop,K=U.PromiseInvokeOrFallbackOrNoop,X=U.ValidateAndNormalizeQueuingStrategy,Z=U.typeIsObject,$=e("./utils.js"),ee=$.rethrowAssertionErrorRejection,re=e("./queue-with-sizes.js"),te=re.DequeueValue,ne=re.EnqueueValueWithSize,oe=re.GetTotalQueueSize,ae=re.PeekQueueValue,ie=function(){function e(){var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},o=t.size,a=t.highWaterMark,i=void 0===a?1:a;if(n(this,e),this._state="writable",this._storedError=void 0,this._writer=void 0,this._writableStreamController=void 0,this._writeRequests=[],this._pendingWriteRequest=void 0,this._pendingCloseRequest=void 0,this._pendingAbortRequest=void 0,void 0!==r.type)throw new RangeError("Invalid type is specified");this._writableStreamController=new le(this,r,o,i)}return H(e,[{key:"abort",value:function(e){return!1===a(this)?Promise.reject(W("abort")):!0===i(this)?Promise.reject(new TypeError("Cannot abort a stream that already has a writer")):s(this,e)}},{key:"getWriter",value:function(){if(!1===a(this))throw W("getWriter");return o(this)}},{key:"locked",get:function(){if(!1===a(this))throw W("locked");return i(this)}}]),e}();r.exports={AcquireWritableStreamDefaultWriter:o,IsWritableStream:a,IsWritableStreamLocked:i,WritableStream:ie,WritableStreamAbort:s,WritableStreamDefaultControllerError:E,WritableStreamDefaultWriterCloseWithErrorPropagation:m,WritableStreamDefaultWriterRelease:v,WritableStreamDefaultWriterWrite:p};var se=function(){function e(r){if(n(this,e),!1===a(r))throw new TypeError("WritableStreamDefaultWriter can only be constructed with a WritableStream instance");if(!0===i(r))throw new TypeError("This stream has already been locked for exclusive writing by another writer");this._ownerWritableStream=r,r._writer=this;var t=r._state;"writable"===t||"closing"===t?A(this):"closed"===t?B(this):(I(this,r._storedError),this._closedPromise.catch(function(){})),"writable"===t&&!0===q(r._writableStreamController)?F(this):M(this,void 0)}return H(e,[{key:"abort",value:function(e){return!1===_(this)?Promise.reject(O("abort")):void 0===this._ownerWritableStream?Promise.reject(z("abort")):h(this,e)}},{key:"close",value:function(){if(!1===_(this))return Promise.reject(O("close"));var e=this._ownerWritableStream;return void 0===e?Promise.reject(z("close")):"closing"===e._state?Promise.reject(new TypeError("cannot close an already-closing stream")):b(this)}},{key:"releaseLock",value:function(){if(!1===_(this))throw O("releaseLock");void 0!==this._ownerWritableStream&&v(this)}},{key:"write",value:function(e){if(!1===_(this))return Promise.reject(O("write"));var r=this._ownerWritableStream;return void 0===r?Promise.reject(z("write to")):"closing"===r._state?Promise.reject(new TypeError("Cannot write to an already-closed stream")):p(this,e)}},{key:"closed",get:function(){return!1===_(this)?Promise.reject(O("closed")):this._closedPromise}},{key:"desiredSize",get:function(){if(!1===_(this))throw O("desiredSize");if(void 0===this._ownerWritableStream)throw z("desiredSize");return y(this)}},{key:"ready",get:function(){return!1===_(this)?Promise.reject(O("ready")):this._readyPromise}}]),e}(),le=function(){function e(r,t,o,i){if(n(this,e),!1===a(r))throw new TypeError("WritableStreamDefaultController can only be constructed with a WritableStream instance");if(void 0!==r._writableStreamController)throw new TypeError("WritableStreamDefaultController instances can only be created by the WritableStream constructor");this._controlledWritableStream=r,this._underlyingSink=t,this._queue=[],this._started=!1,this._writing=!1,this._inClose=!1;var s=X(o,i);this._strategySize=s.size,this._strategyHWM=s.highWaterMark;var l=q(this);!0===l&&f(r,l);var u=this,c=G(t,"start",[this]);Promise.resolve(c).then(function(){u._started=!0,j(u)},function(e){k(u,e)}).catch(ee)}return H(e,[{key:"error",value:function(e){if(!1===R(this))throw new TypeError("WritableStreamDefaultController.prototype.error can only be used on a WritableStreamDefaultController");var r=this._controlledWritableStream._state;if("closed"===r||"errored"===r)throw new TypeError("The stream is "+r+" and so cannot be errored");E(this,e)}}]),e}()},{"./helpers.js":5,"./queue-with-sizes.js":6,"./utils.js":2}]},{},[1])(1)})}});